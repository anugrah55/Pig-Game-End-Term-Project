<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pig Dice Game - Carrot Edition</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const Dices = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect width="12" height="12" x="2" y="10" rx="2" ry="2"/>
                <path d="m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6"/>
                <path d="M6 18h.01"/>
                <path d="M10 14h.01"/>
                <path d="M15 6h.01"/>
                <path d="M18 9h.01"/>
            </svg>
        );

        const DiceGame = () => {
          const MAX_SCORE = 50;
          const [gameState, setGameState] = useState('setup');
          const [numPlayers, setNumPlayers] = useState(2);
          const [playerScores, setPlayerScores] = useState([]);
          const [currentPlayer, setCurrentPlayer] = useState(0);
          const [currentTurnScore, setCurrentTurnScore] = useState(0);
          const [lastRoll, setLastRoll] = useState(null);
          const [message, setMessage] = useState('');
          const [isRolling, setIsRolling] = useState(false);

          const startGame = () => {
            setPlayerScores(Array(numPlayers).fill(0));
            setCurrentPlayer(0);
            setCurrentTurnScore(0);
            setLastRoll(null);
            setMessage(`Pig 1's turn to roll!`);
            setGameState('playing');
          };

          const rollDice = () => {
            if (isRolling) return;
            
            setIsRolling(true);
            setLastRoll('rolling');
            
            setTimeout(() => {
              const roll = Math.floor(Math.random() * 6) + 1;
              setLastRoll(roll);
              
              if (roll === 1) {
                setMessage(`Oink! You rolled a 1! Pig out!`);
                setCurrentTurnScore(0);
                setIsRolling(false);
                
                setTimeout(() => {
                  endTurn(true);
                }, 1500);
              } else {
                const newTurnScore = currentTurnScore + roll;
                setCurrentTurnScore(newTurnScore);
                setMessage(`You rolled a ${roll}! Keep going or bank it?`);
                setIsRolling(false);
              }
            }, 500);
          };

          const endTurn = (rolledOne = false) => {
            const newScores = [...playerScores];
            if (!rolledOne) {
              newScores[currentPlayer] += currentTurnScore;
            }
            setPlayerScores(newScores);

            // Check for winner
            if (newScores[currentPlayer] >= MAX_SCORE) {
              setGameState('finished');
              return;
            }

            // Move to next player
            const nextPlayer = (currentPlayer + 1) % numPlayers;
            setCurrentPlayer(nextPlayer);
            setCurrentTurnScore(0);
            setLastRoll(null);
            setMessage(`Pig ${nextPlayer + 1}'s turn to roll!`);
          };

          const resetGame = () => {
            setGameState('setup');
            setNumPlayers(2);
            setPlayerScores([]);
            setCurrentPlayer(0);
            setCurrentTurnScore(0);
            setLastRoll(null);
            setMessage('');
          };

          const getDiceFace = (value) => {
            const dots = {
              1: [[1, 1]],
              2: [[0, 0], [2, 2]],
              3: [[0, 0], [1, 1], [2, 2]],
              4: [[0, 0], [0, 2], [2, 0], [2, 2]],
              5: [[0, 0], [0, 2], [1, 1], [2, 0], [2, 2]],
              6: [[0, 0], [0, 2], [1, 0], [1, 2], [2, 0], [2, 2]]
            };

            return (
              <div className="relative w-24 h-24 bg-pink-100 rounded-xl shadow-lg border-4 border-pink-800 grid grid-cols-3 grid-rows-3 gap-1 p-3">
                {value === 'rolling' ? (
                  <div className="col-span-3 row-span-3 flex items-center justify-center">
                    <div className="animate-spin text-4xl">ğŸ²</div>
                  </div>
                ) : (
                  dots[value]?.map(([row, col], idx) => (
                    <div
                      key={idx}
                      className="absolute w-3 h-3 bg-pink-800 rounded-full"
                      style={{
                        top: `${row * 33 + 16.5}%`,
                        left: `${col * 33 + 16.5}%`,
                        transform: 'translate(-50%, -50%)'
                      }}
                    />
                  ))
                )}
              </div>
            );
          };

          const getPigEmoji = (index) => {
            const pigs = ['ğŸ·', 'ğŸ–', 'ğŸ½', 'ğŸ—'];
            return pigs[index % pigs.length];
          };

          if (gameState === 'setup') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-pink-400 via-pink-500 to-pink-600 flex items-center justify-center p-4">
                <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full border-8 border-pink-300">
                  <div className="text-center mb-8">
                    <div className="text-7xl mb-4">ğŸ·</div>
                    <h1 className="text-5xl font-bold text-pink-700 mb-2">PIG DICE</h1>
                    <p className="text-pink-600 font-semibold text-lg">First to {MAX_SCORE} carrots wins!</p>
                    <div className="mt-2 text-pink-500">Oink oink! ğŸ–</div>
                  </div>
                  
                  <div className="mb-6">
                    <label className="block text-pink-800 font-bold mb-3 text-lg">
                      How Many Pigs? (2-4)
                    </label>
                    <div className="flex gap-3">
                      {[2, 3, 4].map(num => (
                        <button
                          key={num}
                          onClick={() => setNumPlayers(num)}
                          className={`flex-1 py-3 rounded-xl font-bold text-lg transition-all ${
                            numPlayers === num
                              ? 'bg-pink-600 text-white shadow-lg scale-105'
                              : 'bg-pink-100 text-pink-700 hover:bg-pink-200'
                          }`}
                        >
                          {num} ğŸ·
                        </button>
                      ))}
                    </div>
                  </div>

                  <button
                    onClick={startGame}
                    className="w-full bg-gradient-to-r from-pink-600 to-pink-700 text-white py-4 rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transition-all hover:scale-105"
                  >
                    ğŸ· Start Playing! ğŸ·
                  </button>

                  <div className="mt-6 p-4 bg-pink-50 rounded-xl border-2 border-pink-200">
                    <h3 className="font-bold text-pink-800 mb-2 flex items-center gap-2">
                      <span>ğŸ²</span> How to Play:
                    </h3>
                    <ul className="text-sm text-pink-700 space-y-1">
                      <li>â€¢ Roll the dice to collect carrots ğŸ¥•</li>
                      <li>â€¢ Roll a 1 and PIG OUT! Lose your turn carrots!</li>
                      <li>â€¢ Bank your carrots before you pig out!</li>
                      <li>â€¢ First pig to {MAX_SCORE} carrots wins! ğŸ†</li>
                    </ul>
                  </div>
                </div>
              </div>
            );
          }

          if (gameState === 'finished') {
            // Calculate rankings
            const rankedPlayers = playerScores
              .map((score, idx) => ({ score, idx, hasWon: score >= MAX_SCORE }))
              .sort((a, b) => b.score - a.score);

            const getRankLabel = (rank) => {
              if (numPlayers === 2) {
                return rank === 0 ? 'ğŸ† WINNER' : 'ğŸ’” LOSER';
              } else {
                const ranks = ['ğŸ¥‡ 1st Place', 'ğŸ¥ˆ 2nd Place', 'ğŸ¥‰ 3rd Place', '4th Place'];
                return ranks[rank];
              }
            };

            return (
              <div className="min-h-screen bg-gradient-to-br from-yellow-400 via-pink-400 to-pink-500 flex items-center justify-center p-4">
                <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center border-8 border-yellow-300">
                  <div className="text-8xl mb-4 animate-bounce">ğŸ†</div>
                  <div className="text-6xl mb-4">{getPigEmoji(rankedPlayers[0].idx)}</div>
                  <h1 className="text-4xl font-bold text-pink-700 mb-4">
                    {numPlayers === 2 ? 'Winner Winner!' : 'Game Over!'}
                  </h1>
                  <p className="text-2xl text-pink-600 font-bold mb-2">
                    Pig {rankedPlayers[0].idx + 1} {numPlayers === 2 ? 'Wins!' : 'Takes 1st Place!'}
                  </p>
                  <p className="text-lg text-pink-600 mb-6">With {rankedPlayers[0].score} carrots! ğŸ¥•</p>
                  
                  <div className="mb-6 space-y-2">
                    {rankedPlayers.map((player, rank) => (
                      <div
                        key={player.idx}
                        className={`p-4 rounded-xl flex items-center justify-between ${
                          rank === 0
                            ? 'bg-gradient-to-r from-yellow-400 to-pink-400 text-white'
                            : rank === 1 && numPlayers > 2
                            ? 'bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800'
                            : rank === 2 && numPlayers > 2
                            ? 'bg-gradient-to-r from-orange-300 to-orange-400 text-gray-800'
                            : numPlayers === 2
                            ? 'bg-gray-200 text-gray-700'
                            : 'bg-pink-50 text-pink-700'
                        }`}
                      >
                        <span className="font-bold flex items-center gap-2">
                          {getPigEmoji(player.idx)} Pig {player.idx + 1}
                        </span>
                        <div className="text-right">
                          <div className="font-bold">{player.score} ğŸ¥•</div>
                          <div className="text-xs font-semibold">{getRankLabel(rank)}</div>
                        </div>
                      </div>
                    ))}
                  </div>

                  <button
                    onClick={resetGame}
                    className="w-full bg-gradient-to-r from-pink-600 to-pink-700 text-white py-4 rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transition-all hover:scale-105"
                  >
                    ğŸ· Play Again! ğŸ·
                  </button>
                </div>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-gradient-to-br from-pink-300 via-pink-400 to-pink-500 p-4">
              <div className="max-w-4xl mx-auto">
                <div className="text-center mb-4">
                  <div className="inline-block bg-red-700 text-white px-6 py-3 rounded-t-3xl shadow-lg border-4 border-red-800">
                    <h1 className="text-3xl font-bold">ğŸ· PIG DICE BARN ğŸ·</h1>
                  </div>
                </div>

                <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
                  {playerScores.map((score, idx) => (
                    <div
                      key={idx}
                      className={`p-4 rounded-xl text-center transition-all border-4 ${
                        idx === currentPlayer
                          ? 'bg-white text-pink-600 shadow-lg scale-105 border-pink-400 animate-pulse'
                          : 'bg-pink-100 text-pink-700 border-pink-300'
                      }`}
                    >
                      <div className="text-4xl mb-1">{getPigEmoji(idx)}</div>
                      <div className="font-bold text-lg">Pig {idx + 1}</div>
                      <div className="text-3xl font-bold">{score}</div>
                      <div className="text-sm opacity-75">/ {MAX_SCORE} ğŸ¥•</div>
                    </div>
                  ))}
                </div>

                <div className="bg-gradient-to-b from-yellow-50 to-yellow-100 rounded-3xl shadow-2xl p-8 border-8 border-yellow-800">
                  <div className="text-center mb-6">
                    <div className="text-6xl mb-2">{getPigEmoji(currentPlayer)}</div>
                    <h2 className="text-3xl font-bold text-pink-700 mb-2">
                      Pig {currentPlayer + 1}'s Turn
                    </h2>
                    <p className="text-lg text-pink-600 font-semibold">{message}</p>
                  </div>

                  <div className="flex justify-center mb-8">
                    {lastRoll ? getDiceFace(lastRoll) : (
                      <div className="w-24 h-24 bg-pink-100 rounded-xl flex items-center justify-center text-pink-400 border-4 border-dashed border-pink-300">
                        <Dices className="w-12 h-12" />
                      </div>
                    )}
                  </div>

                  <div className="text-center mb-8 bg-white rounded-2xl p-6 border-4 border-pink-300">
                    <div className="text-pink-600 font-bold mb-2 text-lg">ğŸ¥• Carrots This Turn ğŸ¥•</div>
                    <div className="text-6xl font-bold text-pink-700">{currentTurnScore}</div>
                    {currentTurnScore > 0 && (
                      <div className="text-pink-500 text-sm mt-2">
                        {'ğŸ¥•'.repeat(Math.min(currentTurnScore, 10))}
                      </div>
                    )}
                  </div>

                  <div className="flex gap-4">
                    <button
                      onClick={rollDice}
                      disabled={isRolling || lastRoll === 1}
                      className="flex-1 bg-gradient-to-r from-pink-600 to-pink-700 text-white py-4 rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 border-4 border-pink-800"
                    >
                      ğŸ² Roll Dice
                    </button>
                    <button
                      onClick={() => endTurn(false)}
                      disabled={isRolling || currentTurnScore === 0}
                      className="flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white py-4 rounded-xl font-bold text-xl shadow-lg hover:shadow-xl transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 border-4 border-green-800"
                    >
                      ğŸ¥• Bank Carrots
                    </button>
                  </div>

                  {lastRoll === 1 && (
                    <div className="mt-4 text-center text-red-600 font-bold text-lg animate-bounce">
                      ğŸ· PIG OUT! No carrots for you! ğŸ·
                    </div>
                  )}
                </div>

                <div className="text-center mt-4">
                  <button
                    onClick={resetGame}
                    className="text-white hover:text-yellow-200 transition-colors underline font-semibold"
                  >
                    ğŸ  Back to Barn
                  </button>
                </div>
              </div>
            </div>
          );
        };

        ReactDOM.render(<DiceGame />, document.getElementById('root'));
    </script>
</body>
</html>